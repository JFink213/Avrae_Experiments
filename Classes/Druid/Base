!alias wildshape {{G=load_json(get_gvar("4be574e3-e431-4666-a9be-3447018d3ba4"))}}{{g,a,q,c,f=load_json(get_gvar(G[0]))," ".join(&ARGS&).title(),"Wild Shape",combat(),'-footer "!wildshape help for more information | Developed by @'+'silverbass#2407"'}}{{m,v,F,cf=0 if "end" in a.lower() else -1 if "help" in a.lower() or not a else 2 if "elemental" in a.lower() else 1,cc_exists(q) and get_cc(q)>0 and a,[x for x in g if a.lower()==x.n.lower()]+[x for x in g if a.lower() in x.n.lower() and a.lower()!=x.n.lower()]+[''],[x.name for x in c.combatants if name in x.name and name!=x.name] if c and c.combatants else ""}}{{F,cf=F[0],cf[0] if cf else ""}}{{dt=max(0,-(c.get_combatant(cf).hp) if c and cf and c.get_combatant(cf) else 0)}}{{get_gvar(G[1]).replace("ws","wildshape")+f" -color {color} -thumb {image} {f}" if m<0 else "multiline"}}{{v=v and F if m>0 else v}}
{{mod_cc(q,-m) if v and m>0 else ""}}{{f'!embed -title "{name} {"transforms into a "+F.n if v else "tries to transform"}{" with Elemental Wild Shape" if m>1 else ""}!" {f} -desc "{"" if v else "You do not have this ability" if not cc_exists(q) else G[2] if not a else G[3]}" -f "{q}|{cc_str(q) if cc_exists(q) else "*None*"}" -thumb {image} -color {color}' if m>0 else f'!embed {f} -title "{name} ends their Wild Shape" -f "Damage Transfered|{dt}" -thumb {image} -color {color}' if m==0 else ""}}
{{f'!i opt "{name}" -group "{name+" (Wild Shape)"}"\n!i madd "{F.n}" -name "{F.n} ({name})" -h -group "{name+" (Wild Shape)"}" -ac {max(F.ac,10+F.dex+max(wisdomMod if get("MonkLevel") else 0,F.con if get("BarbarianLevel") else 0))}'+(f'\n!i opt "{F.n} ({name})" -resist '+" -resist ".join([r for r in get_raw().resist if (not r in F.resist) and (not r in F.immune)]) if get_raw().resist else '') if v and m>0 and c else  ""}}
{{f'!i remove {cf}\n!i opt "{name}" -group None\n!i hp "{name}" -{dt}' if m==0 and c and cf else ""}}
